<div class="modal work-modal fade modal-askrioni" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <button type="button" class="modal-close" data-dismiss="modal">x</button>
            <div class="row">
                <div class="works-scrol d-flex">
                    <div class="askrioni-1">
                        <img src="/website/assets/img/askrioni-1.webp" alt="">
                    </div>
                    <div class="askrioni-2">
                        <img src="/website/assets/img/askrioni-2.webp" alt="">
                    </div>
                    <div class="askrioni-3">
                        <img src="/website/assets/img/askrioni-3.webp" alt="">
                        <img src="/website/assets/img/askrioni-4.webp" alt="">
                    </div>
                    <div class="askrioni-4">
                        <img src="/website/assets/img/askrioni-5.webp" alt="">
                    </div>
                    <div class="askrioni-5">
                        <img src="/website/assets/img/askrioni-6.webp" alt="">
                    </div>
                    <div class="askrioni-6">
                        <img src="/website/assets/img/askrioni-7.webp" alt="">
                        <img src="/website/assets/img/askrioni-8.webp" alt="">
                    </div>
                    <div class="askrioni-7">
                        <img src="/website/assets/img/askrioni-9.webp" alt="">
                        <img src="/website/assets/img/askrioni-10.webp" alt="">
                    </div>
                    <div class="askrioni-8">
                        <img src="/website/assets/img/askrioni-11.webp" alt="">
                    </div>
                    <div class="askrioni-9">
                        <img src="/website/assets/img/askrioni-12.webp" alt="">
                    </div>
                </div>
                <div class="col-12">
                    <p class="work-modal-title">CHITOSTAN</p>
                    <p class="work-modal-description">
                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal work-modal fade modal-chitostan" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <button type="button" class="modal-close" data-dismiss="modal">x</button>
            <div class="row">
                <div class="works-scrol d-flex">
                    <div class="chitostan-1">
                        <img src="/website/assets/img/chitostan-1.webp" alt="">
                    </div>
                    <div class="chitostan-2">
                        <img src="/website/assets/img/chitostan-2.webp" alt="">
                        <img src="/website/assets/img/chitostan-3.webp" alt="">
                    </div>
                    <div class="chitostan-3">
                        <img src="/website/assets/img/chitostan-4.webp" alt="">
                    </div>
                    <div class="chitostan-4">
                        <img src="/website/assets/img/chitostan-5.webp" alt="">
                    </div>
                    <div class="chitostan-5">
                        <img src="/website/assets/img/chitostan-6.webp" alt="">
                        <img src="/website/assets/img/chitostan-6.webp" alt="">
                    </div>
                    <div class="chitostan-6">
                        <img src="/website/assets/img/chitostan-8.webp" alt="">
                        <img src="/website/assets/img/chitostan-9.webp" alt="">
                    </div>
                </div>
                <div class="col-12">
                    <p class="work-modal-title">CHITOSTAN</p>
                    <p class="work-modal-description">
                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal work-modal fade modal-lale" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <button type="button" class="modal-close" data-dismiss="modal">x</button>
            <div class="row">
                <div class="works-scrol d-flex">
                    <div class="lale-1">
                        <img src="/website/assets/img/lale-1.webp" alt="">
                    </div>
                    <div class="lale-2">
                        <img src="/website/assets/img/lale-2.webp" alt="">
                        <img src="/website/assets/img/lale-3.webp" alt="">
                    </div>
                    <div class="lale-3">
                        <img src="/website/assets/img/lale-4.webp" alt="">
                    </div>
                </div>
                <div class="col-12">
                    <p class="work-modal-title">LALE</p>
                    <p class="work-modal-description">
                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal work-modal fade modal-tanovani" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <button type="button" class="modal-close" data-dismiss="modal">x</button>
            <div class="row">
                <div class="col-sm-4 solo-img">
                    <img src="" alt="">
                </div>
                <div class="col-sm-4 two-img">
                    <img src="" alt="">
                    <img class="two-two" alt="">
                </div>
                <div class="col-sm-4 solo-img">
                    <img src="" alt="">
                </div>
                <div class="col-12">
                    <p class="work-modal-title">LALE</p>
                    <p class="work-modal-description">
                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
$(document).ready(function(){
  $('.works-scrol').each(function() {
    var slider = $(this);
    var isDown = false,
        startX = 0,
        scrollLeft = 0,
        velocity = 0,
        momentumID = null,
        lastX = 0,
        lastTime = 0,
        moving = false,
        wheelVelocity = 0,
        touchVelocity = 0;

    function cloneImagesForLoop() {
      var images = slider.children().clone();
      slider.append(images);
    }

    cloneImagesForLoop();

    slider.on('mousedown', function(e) {
      e.preventDefault();
      cancelMomentumTracking();
      isDown = true;
      moving = false;
      startX = e.pageX;
      scrollLeft = slider.scrollLeft();
      lastX = e.pageX;
      lastTime = Date.now();

      $(document).on('mousemove.drag', function(e){
        var dx = e.pageX - startX;
        if (Math.abs(dx) > 3) moving = true;
        slider.scrollLeft(scrollLeft - dx);
        trackVelocity(e.pageX);
        checkLoop();
      });

      $(document).one('mouseup.drag', function() {
        isDown = false;
        $(document).off('mousemove.drag');
        if (moving) beginMomentum();
      });
    });

    slider.on('touchstart', function(e) {
      var touch = e.touches[0];
      cancelMomentumTracking();
      isDown = true;
      moving = false;
      startX = touch.pageX;
      scrollLeft = slider.scrollLeft();
      lastX = touch.pageX;
      lastTime = Date.now();
      touchVelocity = 0;

      $(document).on('touchmove.drag', function(e){
        var touch = e.touches[0];
        var dx = touch.pageX - startX;
        if (Math.abs(dx) > 3) moving = true;
        slider.scrollLeft(scrollLeft - dx);
        trackTouchVelocity(touch.pageX);
        checkLoop();
      });

      $(document).one('touchend.drag', function() {
        isDown = false;
        $(document).off('touchmove.drag');
        if (moving) beginTouchMomentum();
      });
    });

    slider.on('wheel', function(e) {
      e.preventDefault();
      var delta = e.originalEvent.deltaY || -e.originalEvent.wheelDelta;
      wheelVelocity += delta * 0.1;

      if (!momentumID) smoothWheelMomentum();
    });

    function smoothWheelMomentum() {
      if (Math.abs(wheelVelocity) < 0.5) {
        wheelVelocity = 0;
        momentumID = null;
        return;
      }

      slider.scrollLeft(slider.scrollLeft() + wheelVelocity);
      wheelVelocity *= 0.92;
      checkLoop();

      momentumID = requestAnimationFrame(smoothWheelMomentum);
    }

    function trackVelocity(newX) {
      var now = Date.now();
      var dt = now - lastTime;
      if(dt > 0) {
        velocity = (newX - lastX) / dt;
        lastX = newX;
        lastTime = now;
      }
    }

    function trackTouchVelocity(newX) {
      var now = Date.now();
      var dt = now - lastTime;
      if (dt > 0) {
        touchVelocity = (newX - lastX) / dt;
        lastX = newX;
        lastTime = now;
      }
    }

    function beginMomentum() {
      if(Math.abs(velocity) < 0.05) return;

      var amplitude = velocity * 300;
      var target = slider.scrollLeft() - amplitude;
      var timeConstant = 550;

      var startTime = Date.now();
      var initialScroll = slider.scrollLeft();

      function momentum() {
        var elapsed = Date.now() - startTime;
        var delta = Math.exp(-elapsed / timeConstant);
        var newScroll = target + (initialScroll - target) * delta;

        if (!isDown) {
          slider.scrollLeft(newScroll);
          checkLoop();
          if (Math.abs(newScroll - target) > 0.5) {
            momentumID = requestAnimationFrame(momentum);
          }
        }
      }

      momentum();
    }

    function beginTouchMomentum() {
      if (Math.abs(touchVelocity) < 0.05) return;

      var amplitude = touchVelocity * 500;
      var target = slider.scrollLeft() - amplitude;
      var timeConstant = 350;

      var startTime = Date.now();
      var initialScroll = slider.scrollLeft();

      function touchMomentum() {
        var elapsed = Date.now() - startTime;
        var delta = Math.exp(-elapsed / timeConstant);
        var newScroll = target + (initialScroll - target) * delta;

        if (!isDown) {
          slider.scrollLeft(newScroll);
          checkLoop();
          if (Math.abs(newScroll - target) > 0.5) {
            momentumID = requestAnimationFrame(touchMomentum);
          }
        }
      }

      touchMomentum();
    }

    function checkLoop() {
      var maxScroll = slider[0].scrollWidth / 2;
      var currentScroll = slider.scrollLeft();

      if (currentScroll >= maxScroll - 10) {
        slider.scrollLeft(10);
        if (!isDown) {
          beginTouchMomentum(); 
        }
      }

      if (currentScroll <= 0) {
        slider.scrollLeft(maxScroll - 10);
        if (!isDown) {
          beginTouchMomentum(); 
        }
      }
    }

    function cancelMomentumTracking() {
      if(momentumID) {
        cancelAnimationFrame(momentumID);
        momentumID = null;
      }
      velocity = 0;
      wheelVelocity = 0;
      touchVelocity = 0;
    }
  });
});


</script>